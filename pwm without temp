#define LED 13

#define FRAME 20000ul // 20000us => 50Hz
#define PERIOD 1000000ul // 1s


void setup() {
  pinMode(LED, OUTPUT);
}


void loop() {
  unsigned long t;
  float p, f, v;
  
  t = micros();
  f = (t % FRAME) / (float) FRAME;
  p = (t % PERIOD) / (float) PERIOD;
  v = (1.0 + sin(p * 2.0 * PI)) / 2.0;
  digitalWrite(LED, v > f ? HIGH : LOW);
}
